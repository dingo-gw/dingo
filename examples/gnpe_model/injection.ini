################################################################################
##  Job submission arguments
################################################################################

local = True
accounting = dingo
request-cpus-importance-sampling = 64
n-parallel = 1
sampling-requirements = [TARGET.CUDAGlobalMemoryMb>40000]

################################################################################
##  Sampler arguments
################################################################################

model-init = training/init_train_dir/model_latest.pt
model = training/main_train_dir/model_latest.pt
device = 'cuda'
num-gnpe-iterations = 30
num-samples = 50000
batch-size = 50000
recover-log-prob = true
prior-dict = {
    luminosity_distance = bilby.gw.prior.UniformComovingVolume(minimum=100, maximum=2000, name='luminosity_distance'),
}

################################################################################
## Data generation arguments
################################################################################

injection-dict = {
        'chirp_mass': 28.0, 
        'mass_ratio': 1.0, 
        'luminosity_distance': 1000, 
        'dec': 0.1, 
        'ra': 0.1, 
        'theta_jn': 0.1, 
        'psi': 0.1, 
        'phase': 0.1, 
        'geocent_time': 0.0,
        'a_1':0.1, 
        'a_2':0.1, 
        'tilt_1':0.1, 
        'tilt_2':0.1, 
        'phi_jl':0.1, 
        'phi_12':0.1, 
}

trigger-time = 1126259462.391 
label = injection
outdir = injection
psd-length = 128

################################################################################
## Plotting arguments
################################################################################

plot-corner = true
plot-weights = true
plot-log-probs = true